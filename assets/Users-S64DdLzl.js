import{b as a,R as e,B as m,T as l,M as o,L as n,y as d,z as A}from"./Toast-OISi9GcT.js";import{b as G,R as J,A as K,a as Q}from"./buttonThemes-kb01FGMI.js";import{I as R}from"./iconBase-pjIET6RN.js";import{a as u}from"./axios-L6U4YIEh.js";import{u as V}from"./index-wUg-ar-9.js";const te=()=>{document.title="Users List";const i=V().data,f=a.useRef(),C=a.useRef(),g=a.useRef(),b=a.useRef(),k=a.useRef(),[P,q]=a.useState(""),[y,x]=a.useState(""),[N,w]=a.useState(""),[I,U]=a.useState(""),[E,L]=a.useState(""),[F,S]=a.useState(""),[p,M]=a.useState(0),[D,H]=a.useState([]),[B,c]=a.useState(!1),[z,h]=a.useState(!1),v=10,T=()=>{const t={username:C.current.value,email:f.current.value,password:g.current.value,noInduk:b.current.value,role:k.current.value};u.post("http://localhost:8001/users",t,{withCredentials:!0}).then(()=>{alert("User saved successfully"),c(!1)})},$=async t=>{const r={username:y,email:N,noInduk:I,role:F};E!==""&&(r.password=E),await u.put(`http://localhost:8001/users/${t}`,r,{withCredentials:!0}).then(s=>{console.log(s.data),alert("User updated successfully"),h(!1)}).catch(s=>{console.error(s),alert("User update failed")})};function O(t){u.delete(`http://localhost:8001/users/${t}`,{withCredentials:!0}).then(()=>{alert("User deleted Successfully")}).catch(r=>{console.error("Error deleting user:",r),alert("Failed to delete user")})}const j=t=>{u.get(`http://localhost:8001/users/${t}`,{withCredentials:!0}).then(r=>{const s=r.data.data;q(s.id),x(s.username),w(s.email),U(s.noInduk),S(s.role),h(!0)}).catch(r=>{console.error("Error fetching user data:",r.message),alert("Failed to fetch user data")})};return a.useEffect(()=>{H(i.filter((t,r)=>r>=p*v&&r<(p+1)*v))},[p,i]),e.createElement("div",{className:"flex flex-col prose lg:prose-xl"},e.createElement("div",{className:"header flex justify-between my-4"},e.createElement("h1",{className:"my-3 font-bold"},"User List"),e.createElement(m,{size:"sm",className:"me-4 w-24 h-10",theme:G,gradientMonochrome:"success",onClick:()=>c(!0)},"Add")),e.createElement(l,null,e.createElement(l.Head,null,e.createElement(l.HeadCell,null,"Username"),e.createElement(l.HeadCell,null,"Email"),e.createElement(l.HeadCell,null,"No Induk"),e.createElement(l.HeadCell,null,"Role"),e.createElement(l.HeadCell,null,"Action")),e.createElement(l.Body,{className:"divide-y"},D.map((t,r)=>e.createElement(l.Row,{key:r,className:"bg-white dark:border-gray-700 dark:bg-gray-800"},e.createElement(l.Cell,{className:"whitespace-nowrap font-medium text-gray-900 dark:text-white"},t.username),e.createElement(l.Cell,null,t.email),e.createElement(l.Cell,null,t.noInduk),e.createElement(l.Cell,null,t.role),e.createElement(l.Cell,null,e.createElement("a",{href:"#",onClick:()=>j(t.id),className:"font-medium hover:no-underline text-cyan-600 dark:text-cyan-500 me-2"},"Detail"),e.createElement("a",{href:"#",className:"font-medium hover:no-underline text-green-600 dark:text-green-500",onClick:()=>O(t.id)},"Delete")))))),e.createElement(J,{containerClassName:"pagination flex items-center my-4 mx-auto",pageClassName:"page-item p-2 font-semibold bg-gray-200 rounded-md mx-2 text-black",activeClassName:"active",onPageChange:t=>M(t.selected),pageCount:Math.ceil(i.length/v),breakLabel:"...",previousLabel:e.createElement(R.Provider,{value:{color:"#B8C1CC",size:"36px"}},e.createElement(K,null)),nextLabel:e.createElement(R.Provider,{value:{color:"#B8C1CC",size:"36px"}},e.createElement(Q,null))}),e.createElement(o,{show:B,onClose:()=>c(!1)},e.createElement(o.Header,null,"Add User"),e.createElement(o.Body,null,e.createElement("form",{className:"flex flex-col gap-4"},e.createElement("div",null,e.createElement("div",{className:"mb-2 block"},e.createElement(n,{htmlFor:"username-add",value:"Username"})),e.createElement(d,{ref:C,id:"username-add",type:"text",placeholder:"Enter Username",required:!0})),e.createElement("div",null,e.createElement("div",{className:"mb-2 block"},e.createElement(n,{htmlFor:"email-add",value:"Email"})),e.createElement(d,{ref:f,id:"email-add",type:"email",placeholder:"name@gmail.com",required:!0})),e.createElement("div",null,e.createElement("div",{className:"mb-2 block"},e.createElement(n,{htmlFor:"noInduk-add",value:"No Induk"})),e.createElement(d,{ref:b,id:"noInduk-add",type:"text",placeholder:"Enter ID",required:!0})),e.createElement("div",null,e.createElement("div",{className:"mb-2 block"},e.createElement(n,{htmlFor:"password-add",value:"Password"})),e.createElement(d,{ref:g,id:"password-add",type:"password",placeholder:"Enter Password",required:!0})),e.createElement("div",null,e.createElement("div",{className:"mb-2 block"},e.createElement(n,{htmlFor:"role-add",value:"Select User Role"})),e.createElement(A,{id:"role-add",ref:k,required:!0},e.createElement("option",{value:"user"},"Admin"),e.createElement("option",{value:"student"},"Student"))))),e.createElement(o.Footer,null,e.createElement(m,{onClick:T},"Submit"),e.createElement(m,{color:"gray",onClick:()=>c(!1)},"Cancel"))),e.createElement(o,{show:z,onClose:()=>h(!1)},e.createElement(o.Header,null,"Edit User"),e.createElement(o.Body,null,e.createElement("form",{className:"flex flex-col gap-4"},e.createElement("div",null,e.createElement("div",{className:"mb-2 block"},e.createElement(n,{htmlFor:"username-edit",value:"Username"})),e.createElement(d,{id:"username-edit",type:"text",placeholder:"Enter Username",value:y,onChange:t=>x(t.target.value),required:!0})),e.createElement("div",null,e.createElement("div",{className:"mb-2 block"},e.createElement(n,{htmlFor:"email-edit",value:"Email"})),e.createElement(d,{id:"email-edit",type:"email",placeholder:"name@gmail.com",value:N,onChange:t=>w(t.target.value),required:!0})),e.createElement("div",null,e.createElement("div",{className:"mb-2 block"},e.createElement(n,{htmlFor:"noInduk-edit",value:"No Induk"})),e.createElement(d,{id:"noInduk-edit",type:"text",placeholder:"Enter ID",value:I,onChange:t=>U(t.target.value),required:!0})),e.createElement("div",null,e.createElement("div",{className:"mb-2 block"},e.createElement(n,{htmlFor:"password-edit",value:"Password"})),e.createElement(d,{id:"password-edit",type:"password",placeholder:"Change Password",value:E,onChange:t=>L(t.target.value),required:!0})),e.createElement("div",null,e.createElement("div",{className:"mb-2 block"},e.createElement(n,{htmlFor:"role-edit",value:"Select User Role"})),e.createElement(A,{id:"role-edit",required:!0,value:F,onChange:t=>S(t.target.value)},e.createElement("option",{value:"admin"},"Admin"),e.createElement("option",{value:"student"},"Student"))))),e.createElement(o.Footer,null,e.createElement(m,{onClick:()=>$(P)},"Update"),e.createElement(m,{color:"gray",onClick:()=>c(!1)},"Cancel"))))};export{te as U};
