import{r as H,R as e,T as t,a as k,b as g,N as i,B as v,S as m,A as d,c as y}from"./Toast-OISi9GcT.js";import"./iconBase-pjIET6RN.js";import{c as D,R as I,P as L}from"./Problems-RcPjeauJ.js";import{C as A}from"./Code-XYgr02qX.js";import{h as E}from"./moment-WSJ9un1t.js";import{l as R}from"./helper-C5G82HV9.js";import{u as C,a as N,b as T,O as f}from"./index-wUg-ar-9.js";import{L as F}from"./Login-8_-qKkVf.js";import{P as Y}from"./ProblemDetails--aZFaJpq.js";import{A as j}from"./AddProblem-mEhJUsgz.js";import{a as P}from"./axios-L6U4YIEh.js";import{A as S,a as x}from"./AuthContext-K0IK1Ole.js";import{F as B,a as M,b as O,c as U,d as z}from"./index-FogrHtcu.js";import{P as G}from"./Profile-9u15DGED.js";import{U as J}from"./Users-S64DdLzl.js";import"./buttonThemes-kb01FGMI.js";var p={},w=H;p.createRoot=w.createRoot,p.hydrateRoot=w.hydrateRoot;const _={root:{base:"bg-white px-2 py-2.5 dark:border-gray-700 dark:bg-gray-800 sm:px-4 sticky z-50 top-0",rounded:{on:"rounded",off:""},bordered:{on:"border",off:""},inner:{base:"mx-auto flex flex-wrap items-center justify-between",fluid:{on:"",off:"container"}}},brand:{base:"flex items-center"},collapse:{base:"w-full md:block md:w-auto",list:"mt-4 flex flex-col md:mt-0 md:flex-row md:space-x-8 md:text-sm md:font-medium",hidden:{on:"hidden",off:""}},link:{base:"flex py-2 pr-4 pl-3 md:p-2",active:{on:"rounded hover:text-white bg-[#6251DD] text-white *:mx-auto md:*:m-2",off:"bg-gray-100 rounded text-center text-black hover:text-white hover:bg-[#6251DD] *:mx-auto md:*:m-2"},disabled:{on:"text-gray-400 hover:cursor-not-allowed dark:text-gray-600",off:""}},toggle:{base:"inline-flex items-center rounded-lg p-2 text-sm text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600 md:hidden",icon:"h-6 w-6 shrink-0"}},W=()=>{document.title="Home";const r=C().data;return e.createElement("div",{className:"overflow-x-auto"},e.createElement(t,{hoverable:!0},e.createElement(t.Head,null,e.createElement(t.HeadCell,null,"Code"),e.createElement(t.HeadCell,null,"Title"),e.createElement(t.HeadCell,null,"Due Date"),e.createElement(t.HeadCell,null,"Level"),e.createElement(t.HeadCell,null,"Actions")),e.createElement(t.Body,{className:"divide-y"},r.map((l,s)=>{const o=new DOMParser().parseFromString(R(l.level),"text/html");return e.createElement(t.Row,{key:s,className:"bg-white dark:border-gray-700 dark:bg-gray-800"},e.createElement(t.Cell,{className:"whitespace-nowrap font-medium text-gray-900 dark:text-white"},l.code),e.createElement(t.Cell,null,l.title),e.createElement(t.Cell,null,E(l.startDate).format("HH:mm DD-MM-YYYY")," -"," ",E(l.endDate).format("HH:mm DD-MM-YYYY")),e.createElement(t.Cell,null,e.createElement("div",{dangerouslySetInnerHTML:{__html:o.body.innerHTML}})),e.createElement(t.Cell,null,e.createElement("a",{href:`/solve/${l.id}`,className:"font-medium text-cyan-600 hover:underline dark:text-cyan-500"},"Solve")))}))))},$=()=>e.createElement("div",null,"Register"),h=async a=>{try{return(await P.get(a,{withCredentials:!0})).data}catch(r){if(r.response.status==401)return k("/login")}},u=async(a,r)=>{try{return(await P.get(a+"/"+r,{withCredentials:!0})).data}catch(l){if(console.log(l),l.response.status===401)return k("/login")}},q=({children:a})=>{const{user:r}=g.useContext(S);N().pathname;function s(){localStorage.removeItem("userProfile"),window.location.href="/login"}return e.createElement("div",null,e.createElement(i,{base:!0,rounded:!0,theme:_},e.createElement(i.Brand,{href:"/"},e.createElement("span",{className:"self-center whitespace-nowrap text-xl font-semibold dark:text-white"},"Cakra Online Judge")),e.createElement(i.Toggle,null),e.createElement(i.Collapse,null,r&&e.createElement("div",{className:"link ms-auto flex flex-col w-full justify-center gap-2 md:flex-row"},e.createElement(i.Link,{href:"/profile"},r==null?void 0:r.username),e.createElement(v,{size:"xs",onClick:s,color:"dark"},"Logout")))),e.createElement("div",{className:"my-5"},a))},K={root:{base:"h-full",collapsed:{on:"w-16",off:"w-64"},inner:"h-full overflow-y-auto overflow-x-hidden rounded-lg bg-gray-50 py-4 px-3 dark:bg-gray-800"},collapse:{button:"group flex w-full items-center rounded-lg p-2 text-base font-normal text-gray-900 transition duration-75 hover:bg-gray-100 dark:text-white dark:hover:bg-gray-700",icon:{base:"h-6 w-6 text-gray-500 transition duration-75 group-hover:text-gray-900 dark:text-gray-400 dark:group-hover:text-white",open:{off:"",on:"text-gray-900"}},label:{base:"ml-3 flex-1 whitespace-nowrap text-left",icon:{base:"h-6 w-6 transition ease-in-out delay-0",open:{on:"rotate-180",off:""}}},list:"space-y-2 py-2"},cta:{base:"mt-6 rounded-lg p-4 bg-gray-100 dark:bg-gray-700",color:{blue:"bg-cyan-50 dark:bg-cyan-900",dark:"bg-dark-50 dark:bg-dark-900",failure:"bg-red-50 dark:bg-red-900",gray:"bg-alternative-50 dark:bg-alternative-900",green:"bg-green-50 dark:bg-green-900",light:"bg-light-50 dark:bg-light-900",red:"bg-red-50 dark:bg-red-900",purple:"bg-purple-50 dark:bg-purple-900",success:"bg-green-50 dark:bg-green-900",yellow:"bg-yellow-50 dark:bg-yellow-900",warning:"bg-yellow-50 dark:bg-yellow-900"}},item:{base:"flex items-center justify-center rounded-lg p-2 text-base font-normal text-gray-900 hover:bg-gray-100 dark:text-white dark:hover:bg-gray-700",active:"bg-gray-100 dark:bg-gray-700",collapsed:{insideCollapse:"group w-full pl-8 transition duration-75",noIcon:"font-bold"},content:{base:"px-3 flex-1 whitespace-nowrap"},icon:{base:"h-6 w-6 flex-shrink-0 text-gray-500 transition duration-75 group-hover:text-gray-900 dark:text-gray-400 dark:group-hover:text-white",active:"text-gray-700 dark:text-gray-100"},label:"",listItem:""},items:{base:""},itemGroup:{base:"mt-4 space-y-2 border-t border-gray-200 pt-4 first:mt-0 first:border-t-0 first:pt-0 dark:border-gray-700"},logo:{base:"mb-5 flex items-center pl-2.5",collapsed:{on:"hidden",off:"self-center whitespace-nowrap text-xl font-semibold dark:text-white"},img:"mr-3 h-6 sm:h-7"}},Q=({status:a,count:r})=>{const[l,s]=g.useState(r);let n;switch(a){case 401:n="Access Unauthorized";break;case 404:n="Page Not Found";break;default:n="Unknown error";break}return g.useEffect(()=>{const o=setInterval(()=>{s(c=>c-1)},1e3);return()=>clearInterval(o)},[]),e.createElement("div",null,e.createElement("section",{className:"bg-white dark:bg-gray-900 "},e.createElement("div",{className:"container flex items-center min-h-screen px-6 py-12 mx-auto"},e.createElement("div",{className:"flex flex-col items-center max-w-sm mx-auto text-center"},e.createElement("p",{className:"p-3 text-sm font-medium text-blue-500 rounded-full bg-blue-50 dark:bg-gray-800"},e.createElement(B,null)),e.createElement("h1",{className:"mt-3 text-2xl font-semibold text-gray-800 dark:text-white md:text-3xl"},a," | ",n),e.createElement("p",{className:"mt-4 text-gray-500 dark:text-gray-400"},"You'll be redirect back to home in ",e.createElement("strong",null,l)," seconds"),e.createElement("div",{className:"flex items-center w-full mt-6 gap-x-3 shrink-0 sm:w-auto"},e.createElement("button",{className:"flex items-center justify-center w-1/2 px-5 py-2 text-sm text-gray-700 transition-colors duration-200 bg-white border rounded-lg gap-x-2 sm:w-auto dark:hover:bg-gray-800 dark:bg-gray-900 hover:bg-gray-100 dark:text-gray-200 dark:border-gray-700"},e.createElement(M,null),e.createElement("span",null,"Go back")),e.createElement("button",{className:"w-1/2 px-5 py-2 text-sm tracking-wide text-white transition-colors duration-200 bg-blue-500 rounded-lg shrink-0 sm:w-auto hover:bg-blue-600 dark:hover:bg-blue-500 dark:bg-blue-600"},"Take me home"))))))},V=({children:a})=>{const{user:r}=g.useContext(S),l=T(),n=N().pathname,o=5;r.role!="admin"&&setInterval(()=>{l("/")},o*1e3);function c(){localStorage.removeItem("userProfile"),window.location.href="/login"}return e.createElement("div",null,r.role!=="admin"?e.createElement(Q,{status:401,count:o}):e.createElement("div",{className:"h-screen p-4 grid grid-cols-5"},e.createElement(m,{theme:K,"aria-label":"Sidebar with content separator example"},e.createElement(m.Items,null,e.createElement(m.ItemGroup,null,e.createElement(m.Item,{href:"/dashboard/problems",...n==="/dashboard/problems"?{active:!0}:{},icon:O},"Problems"),e.createElement(m.Item,{href:"/dashboard/users",...n==="/dashboard/users"?{active:!0}:{},icon:U},"User"),e.createElement(m.Item,{href:"#",icon:z},e.createElement(v,{size:"xs",className:"bg-gray-5 w-full justify-start ms-0 hover:bg-gray-50",onClick:c,color:"white"},"Logout"))))),e.createElement("div",{className:"ms-4 col-span-4"},a)))},X=()=>{document.title="Submissions";const r=C().data;return e.createElement("div",{className:"flex flex-col prose lg:prose-xl"},e.createElement("div",{className:"flex justify-between"},e.createElement("h1",{className:"my-3 font-bold"},"Submitions")),e.createElement(d,{collapseAll:!0},r.map((l,s)=>{const n=l.submitions;return e.createElement(d.Panel,{key:s},e.createElement(d.Title,null,e.createElement("b",null,l.username)," (",l.noInduk,")"),e.createElement(d.Content,null,e.createElement(t,null,e.createElement(t.Head,null,e.createElement(t.HeadCell,null,"No"),e.createElement(t.HeadCell,null,"Test Pass"),e.createElement(t.HeadCell,null,"Working Time"),e.createElement(t.HeadCell,null,"Success")),e.createElement(t.Body,null,n.map((o,c)=>{const b=o.workTime;return e.createElement(t.Row,{key:c,className:"bg-white dark:border-gray-700 dark:bg-gray-800"},e.createElement(t.Cell,null,c+1),e.createElement(t.Cell,null,o.testPass),e.createElement(t.Cell,null,e.createElement("div",{className:"flex"},e.createElement("div",{className:"hour"},String(b.hours).padStart(2,"0")),":",e.createElement("div",{className:"minutes"},String(b.minutes).padStart(2,"0")),":",e.createElement("div",{className:"seconds"},String(b.seconds).padStart(2,"0")))),e.createElement(t.Cell,null,o.success?e.createElement(y,{className:"flex justify-center",color:"success"},"Success"):e.createElement(y,{className:"flex justify-center",color:"failure"},"Failure")))})))))})))};function Z(){return e.createElement(x,null,e.createElement(f,null))}function ee(){return e.createElement(x,null,e.createElement(q,null,e.createElement(f,null)))}function te(){return e.createElement(x,null,e.createElement(V,null,e.createElement(f,null)))}const ae=D([{element:e.createElement(ee,null),children:[{path:"/",element:e.createElement(W,null),loader:async()=>{const a=await h("http://localhost:8001/problems");return a==null&&(window.location.href="/login"),a}},{path:"/solve/:id",element:e.createElement(A,null),loader:async({params:a})=>await u("http://localhost:8001/problems",a.id)},{path:"/profile",element:e.createElement(G,null),loader:async()=>{const r=JSON.parse(localStorage.getItem("userProfile")).id;return await u("http://localhost:8001/submition/user",r)}}]},{element:e.createElement(te,null),children:[{path:"/dashboard/problems",element:e.createElement(L,null),loader:async()=>await h("http://localhost:8001/problems")},{path:"/dashboard/problems/:id",element:e.createElement(Y,null),loader:async({params:a})=>await u("http://localhost:8001/problems",a.id)},{path:"/dashboard/problems/add",element:e.createElement(j,null)},{path:"/dashboard/solutions/:id",element:e.createElement(X,null),loader:async({params:a})=>await u("http://localhost:8001/submition/solutions",a.id)},{path:"/dashboard/users",element:e.createElement(J,null),loader:async()=>await h("http://localhost:8001/users")}]},{element:e.createElement(Z,null),children:[{path:"/login",element:e.createElement(F,null)},{path:"/register",element:e.createElement($,null)}]}]);p.createRoot(document.getElementById("root")).render(e.createElement(I,{router:ae}));
